<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-10">
    <h2>Daily Fuel Price</h2>
    <ol class="breadcrumb">
      <li>
        <%= link_to "Home", supplier_dashboard_path%>
      </li>
      <li class="active">
        <strong>Fuel Prices</strong>
      </li>
    </ol>
  </div>
  <div class="col-lg-2"></div>
</div>

<div class="row">
  <div class="col-lg-12">
    <div class="ibox float-e-margins">
      <div class="ibox-content">
        <div class="">
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#newFuelPrice">New Price</button>
        </div>
        <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover">
          <thead>
            <tr>
              <th>Date</th>
              <th>Status</th>
              <th>Regular</th>
              <th>Medium</th>
              <th>Premium</th>
              <th>Diesel</th>
              <th>Action</th>

            </tr>
          </thead>
          <% @fuel_prices.each do |f|%>
          <tbody>
            <tr class="gradeX">
              <td class="mycell col-md-1"><strong><%= f.created_at.strftime('%F') %></strong></td>
              <% t = Time.zone.now %>
              <% if f.id == @latest_fuel_price.id && (@latest_fuel_price.created_at > t.beginning_of_day) && (@latest_fuel_price.created_at <= t) %>
                <td class="mycell col-md-1"><strong><span class="label label-success">Latest</span></strong></td>
              <%elsif f.id != @latest_fuel_price.id && (@latest_fuel_price.created_at > t.beginning_of_day) && (@latest_fuel_price.created_at <= t) %>
                <td class="mycell col-md-1"><strong><span class="label label-warning">Expired</span></strong></td>
              <%else%>
                <td class="mycell col-md-1"><strong><span class="label label-danger">Ancient Price</span></strong></td>
              <%end%>
              <td class="mycell col-md-1">
                <%= f.regular %>
              </td>
              <td class="mycell col-md-1"><%= f.medium %></td>
              <td class="mycell col-md-1"><%= f.premium %></td>
              <td class="mycell col-md-1"><%= f.diesel %></td>
              <% if f.id == @latest_fuel_price.id && (@latest_fuel_price.created_at > t.beginning_of_day) && (@latest_fuel_price.created_at <= t) %>
              <td class="mycell col-md-1"><%= link_to "Edit", edit_supplier_fuel_price_path(f), class: "btn btn-primary btn-xs"%></td>
              <%else%>
                <td class="mycell col-md-1"><strong><span class="label label-danger">Uneditable</span></strong></td>
              <%end%>

            </tr>
<%end%>
          </tbody>

        </table>

      </div>
    </div>
  </div>
</div>

<div id="newFuelPrice" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Updating Fuel Price</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-12">
            <div class="ibox-content">
              <div class="row">
                <%= simple_form_for @fuel_price, url: supplier_fuel_prices_path, class: "m-t" do |f| %>
                <%= f.input :regular, label: "Regular" %>
                <%= f.input :medium, label: "Medium"%>
                <%= f.input :premium, label: "Premium" %>
                <%= f.input :diesel, label: "Diesel" %>
                <%= f.button :submit, "Update", class: "btn btn-primary block full-width m-b"%>
                <%end%>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
